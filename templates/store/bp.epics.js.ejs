import { Observable } from 'rxjs/Observable';
import 'rxjs/add/operator/switchMap';
import 'rxjs/add/operator/map';
import 'rxjs/add/operator/catch';
import 'rxjs/add/observable/of';

/**
 * Store specific files
 */
import * as Actions from "./<%= filename %>.actions";
import <%= bpName %>Service from '../services/<%= filename %>.service';

/**
 * Fetch <%= bpName %> from API.
 */
export const <%= bpName %>FetchEpic = (action$, store) =>
	action$
		.ofType(Actions.<%= bpName.toUpperCase() %>_LOAD)
		.switchMap(() => <%= bpName %>Service.fetch())
		.map(response => Actions.<%= bpName %>LoadedAction(response))
		.catch((e) => Observable.of(Actions.<%= bpName %>LoadedFailAction(e)));